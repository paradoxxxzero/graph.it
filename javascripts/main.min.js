/*! graph.it           2014-06-16 */

(function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n,o=function(a,b){return function(){return a.apply(b,arguments)}};for(j=function(a){return 0>a?-1:1},g=function(a){return a.map(function(a){return new THREE.Vector3(a[0],a[1],a[2])})},k=5,b=100,h=100,i={x:[-5,5],y:[-5,5],z:[-5,5]},e=function(a,b){var c,d,e;return c=new THREE.Geometry,a*=.5,c.vertices=g([[-a,-a,-a],[-a,a,-a],[-a,a,-a],[a,a,-a],[a,a,-a],[a,-a,-a],[a,-a,-a],[-a,-a,-a],[-a,-a,a],[-a,a,a],[-a,a,a],[a,a,a],[a,a,a],[a,-a,a],[a,-a,a],[-a,-a,a],[-a,-a,-a],[-a,-a,a],[-a,a,-a],[-a,a,a],[a,a,-a],[a,a,a],[a,-a,-a],[a,-a,a]]),c.computeLineDistances(),d=new THREE.LineBasicMaterial({color:b,linewidth:2}),e=THREE.LinePieces,new THREE.Line(c,d,e)},d=function(a,b){var c,d,e;return c=new THREE.Geometry,a*=.75,c.vertices=g([[0,0,0],[-a,0,0],[a,0,0],[0,0,0],[0,-a,0],[0,a,0],[0,0,0],[0,0,-a],[0,0,a],[0,0,0]]),e=THREE.LinePieces,c.computeLineDistances(),d=new THREE.LineBasicMaterial({color:b,linewidth:2}),new THREE.Line(c,d,e)},f=function(a){var c,d,e;return c=new THREE.PlaneGeometry(b,b,h,h),c.dynamic=!0,e=new THREE.MeshPhongMaterial({color:a,shading:THREE.SmoothShading,blending:THREE.AdditiveBlending,side:THREE.DoubleSide,specular:a,shininess:10,opacity:.4,vertexColors:THREE.FaceColors,metal:!0}),d=new THREE.Mesh(c,material)},a=function(){function a(){this.input=o(this.input,this),this.apply_fun=o(this.apply_fun,this),this.step=o(this.step,this),this.animate=o(this.animate,this),this.camera=new THREE.PerspectiveCamera(30,window.innerWidth/window.innerHeight,1,100*b),this.camera.position.z=2.5*b,this.controls=new THREE.TrackballControls(this.camera),this.controls._rotateStart=new THREE.Vector3(0,-.125,1),this.controls._rotateEnd=new THREE.Vector3(0,.125,1),this.scene=new THREE.Scene,this.line=e(b,6176702),this.scene.add(this.line),this.axis=d(b,6176702),this.scene.add(this.axis),this.plot=f(16734613),this.scene.add(this.plot),this.hemi_light=new THREE.HemisphereLight(16777215,16777215,.6),this.hemi_light.color.setHSL(.6,1,.6),this.hemi_light.groundColor.setHSL(.095,1,.75),this.hemi_light.position.set(0,0,-500),this.scene.add(this.hemi_light),this.point_light=new THREE.PointLight(16777215,.5,1e3),this.point_light.position=this.camera.position,this.scene.add(this.point_light),this.renderer=new THREE.WebGLRenderer({antialias:!0}),this.renderer.setClearColor(1776926),this.renderer.setSize(window.innerWidth,window.innerHeight),this.controls.addEventListener("change",function(a){return function(){return a.renderer.render(a.scene,a.camera)}}(this)),this.first=!0,this.time_parametric=!1,document.body.appendChild(this.renderer.domElement)}return a.prototype.refresh=function(){var a,b,c,d;for(d=this.plot.children,b=0,c=d.length;c>b;b++)a=d[b],a.geometry.computeCentroids(),a.geometry.computeFaceNormals(),a.geometry.computeVertexNormals(),a.geometry.normalsNeedUpdate=!0,a.geometry.verticesNeedUpdate=!0;return this.renderer.render(this.scene,this.camera)},a.prototype.animate=function(){return requestAnimationFrame(this.animate),this.dirty&&this.step(),this.time_parametric&&this.apply_fun(!1),(this.dirty||this.time_parametric)&&this.refresh(),this.controls.update()},a.prototype.step=function(){var a,b,c,d,e,f,g,h;if(this.dirty=!1,k)for(g=this.plot.children,c=0,e=g.length;e>c;c++)for(a=g[c],h=a.geometry.vertices,d=0,f=h.length;f>d;d++){if(b=h[d],null==b.target)return;abs(b.target-b.z)>abs(b.increment)?(b.z+=b.increment,this.dirty=!0):b.z!==b.target&&(b.z=b.target)}},a.prototype.apply_fun=function(a){var c,d,e,f,g,h,j,l,m;for(null==a&&(a=!0),l=this.plot.children,m=[],h=0,j=l.length;j>h;h++)c=l[h],m.push(function(){var h,j,l,m;for(l=c.geometry.vertices,m=[],h=0,j=l.length;j>h;h++)d=l[h],e=d.x*(i.x[1]-i.x[0])/b,f=d.y*(i.y[1]-i.y[0])/b,g=this.fun(e,f,((new Date).getTime()-this.base_time)/1e3),a&&k?(d.target=g*b/(i.z[1]-i.z[0]),m.push(d.increment=(d.target-d.z)/k)):m.push(d.z=g*b/(i.z[1]-i.z[0]));return m}.call(this));return m},a.prototype.input=function(a,b){var c,d,e,f,g,h;if(""!==a.target.value){try{c=new Function("x","y","t","return "+a.target.value),g=random(),h=random(),e=random(),f=random(),d=c(g,h,e),this.time_parametric=d!==c(g,h,f)}catch(i){return}return"number"==typeof d&&c!==this.fun?(b||history.pushState(null,null,"#"+a.target.value),this.base_time=(new Date).getTime(),this.fun=c,this.dirty=!0,this.first||this.time_parametric?(this.apply_fun(!1),this.refresh()):this.apply_fun(!0),this.first=!1):void 0}},a}(),$(function(b){return function(){var c;return b.git=new a,b.git.animate(),c=location.hash.slice(1)||"cos(x) * sin(y)",$("input").on("input",git.input).focus().val(c).trigger("input",!0),$(window).resize(function(){return b.git.camera.aspect=window.innerWidth/window.innerHeight,b.git.renderer.setSize(window.innerWidth,window.innerHeight),b.git.camera.updateProjectionMatrix(),b.git.controls.handleResize(),b.git.renderer.render(b.git.scene,b.git.camera)}),b.addEventListener("popstate",function(){return location.hash&&location.hash.slice(1)!==$("input").val()?$("input").val(location.hash.slice(1)).trigger("input",!0):void 0})}}(this)),n=["abs","acos","asin","atan","atan2","ceil","cos","exp","floor","log","max","min","pow","random","round","sin","sqrt","tan","E","LN2","LN10","LOG2E","LOG10E","PI","SQRT1_2","SQRT2"],l=0,m=n.length;m>l;l++)c=n[l],window[c.toLowerCase()]=Math[c]}).call(this);
//# sourceMappingURL=main.min.map